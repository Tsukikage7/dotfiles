# ============================================
# Kitty 终端配置文件
# ============================================

# ============================================
# [主题配置]
# ============================================
# BEGIN_KITTY_THEME
# Nightfly - 深蓝色主题，适合夜间编码
include current-theme.conf
# END_KITTY_THEME

# ============================================
# [字体配置]
# ============================================

# [字体大小] 16 点
font_size 16

# [常规字体] LigaMonaco Nerd Font
font_family LigaMonaco Nerd Font

# [粗体字体]
bold_font LigaMonaco Nerd Font

# [斜体字体]
italic_font LigaMonaco Nerd Font

# [粗斜体字体]
bold_italic_font LigaMonaco Nerd Font

# ============================================
# [窗口配置]
# ============================================

# [隐藏窗口装饰] 仅隐藏标题栏，保留边框
hide_window_decorations titlebar-only

# [窗口内边距] 15 像素
window_padding_width 15

# [背景透明度] 0.5 = 50% 透明
background_opacity 0.5

# [背景模糊强度] 30，macOS 毛玻璃效果
background_blur 30

# [记住窗口大小] 重启时恢复上次的窗口尺寸
remember_window_size true

# [传统全屏模式] 保留透明效果，不创建独立 Space
macos_traditional_fullscreen yes

# [菜单栏隐藏窗口标题] 更简洁的界面
macos_show_window_title_in_menubar no

# [关闭窗口时退出] 符合 macOS 习惯
macos_quit_when_last_window_closed yes

# ============================================
# [标签栏配置]
# ============================================

# [标签栏位置] 顶部
tab_bar_edge top

# [标签栏样式] powerline 电力线样式
tab_bar_style powerline

# [Powerline 样式] slanted 斜角
tab_powerline_style slanted

# ============================================
# [光标配置]
# ============================================

# [光标拖影] 强度 3，数字越大拖影越长
cursor_trail 3

# ============================================
# [交互行为]
# ============================================

# [选中即复制] 类 Unix 风格
copy_on_select yes

# [安全粘贴] 粘贴多行时提示确认，防止误执行命令
safe-paste yes

# ============================================
# [快捷键映射]
# ============================================

# [Kitty 修饰键] macOS 使用 cmd
kitty_mod cmd

# ------------------------------------------
# [标签管理]
# ------------------------------------------

# [Cmd+R] 设置标签页标题
map kitty_mod+r set_tab_title " "

# [Cmd+T] 创建新标签页并继承当前工作目录
map kitty_mod+t launch --type=tab --cwd=current

# [Cmd+数字] 快速跳转到指定标签页 1-10
map kitty_mod+1 goto_tab 1
map kitty_mod+2 goto_tab 2
map kitty_mod+3 goto_tab 3
map kitty_mod+4 goto_tab 4
map kitty_mod+5 goto_tab 5
map kitty_mod+6 goto_tab 6
map kitty_mod+7 goto_tab 7
map kitty_mod+8 goto_tab 8
map kitty_mod+9 goto_tab 9
map kitty_mod+0 goto_tab 10

# ------------------------------------------
# [鼠标操作]
# ------------------------------------------

# [Cmd+左键] 点击 URL 直接打开
mouse_map kitty_mod+left press ungrabbed,grabbed mouse_click_url

# ------------------------------------------
# [窗口操作]
# ------------------------------------------

# [Fn+F] 切换全屏模式
map fn+f toggle_fullscreen

# [Ctrl+L] 清屏到光标位置，保留滚动历史
map ctrl+l clear_terminal to_cursor_scroll active

# ------------------------------------------
# [分屏操作]
# ------------------------------------------

# [Cmd+[] 水平分屏，上下分割
map kitty_mod+[ launch --location=hsplit

# [Cmd+]] 垂直分屏，左右分割
map kitty_mod+] launch --location=vsplit

# ------------------------------------------
# [自定义搜索]
# ------------------------------------------

# [Cmd+F] 打开增强搜索 - 自定义 kitten
map kitty_mod+f launch --location=hsplit --allow-remote-control kitty +kitten search.py @active-kitty-window-id

# ============================================
# [Kittens 插件配置]
# ============================================

# ------------------------------------------
# [hints 智能提示]
# 功能：高亮终端中的 URL、路径、Git Hash 等
# ------------------------------------------

# [Cmd+E] 智能提示所有可点击内容
map kitty_mod+e kitten hints

# [Cmd+P F] 提取文件路径
map kitty_mod+p>f kitten hints --type path --program -

# [Cmd+P L] 提取整行内容
map kitty_mod+p>l kitten hints --type line --program -

# [Cmd+P W] 提取单词
map kitty_mod+p>w kitten hints --type word --program -

# [Cmd+P H] 提取 Git 提交哈希
map kitty_mod+p>h kitten hints --type hash --program -

# ------------------------------------------
# [unicode_input 字符输入]
# 功能：搜索并插入 Emoji、特殊符号等
# ------------------------------------------

# [Cmd+U] 打开 Unicode 字符输入器
map kitty_mod+u kitten unicode_input

# ------------------------------------------
# [clipboard 剪贴板历史]
# 功能：查看和管理剪贴板历史
# ------------------------------------------

# [Cmd+H] 查看剪贴板历史
map kitty_mod+h kitten clipboard --get-clipboard

# ------------------------------------------
# [其他实用 Kittens]
# 以下插件通过命令行使用
# ------------------------------------------

# [icat] 在终端内显示图片
# 使用: kitty +kitten icat image.png

# [themes] 主题切换器，实时预览
# 使用: kitty +kitten themes

# [diff] 侧边对比文件差异，比传统 diff 更美观
# 使用: kitty +kitten diff file1.txt file2.txt

# [ssh] 增强的 SSH，自动复制终端设置到远程
# 使用: kitty +kitten ssh user@host

# ============================================
# [Shell 配置]
# ============================================

# [默认 Shell] Fish Shell - Homebrew 安装路径
# 移除 --login --interactive，让 Kitty 自动处理
shell /opt/homebrew/bin/fish

# [Shell 集成] 启用后新标签页继承当前工作目录
# 完全由 Kitty 自动注入，不手动加载
shell_integration enabled

# ============================================
# [性能优化]
# ============================================

# [重绘延迟] 5 毫秒，数值越小响应越快
repaint_delay 5

# [输入延迟] 0 毫秒，即时响应
input_delay 0
