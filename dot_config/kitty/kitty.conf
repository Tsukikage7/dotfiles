# Kitty 终端配置

# =========================================================
# 主题
# =========================================================
include current-theme.conf

# =========================================================
# 字体
# =========================================================
font_size 16
font_family LigaMonaco Nerd Font
bold_font LigaMonaco Nerd Font
italic_font LigaMonaco Nerd Font
bold_italic_font LigaMonaco Nerd Font

# =========================================================
# 窗口
# =========================================================
hide_window_decorations titlebar-only
window_padding_width 5
background_opacity 0.92
background_blur 32
background_image ~/dotfiles/wallpapers/wallpaper.png
background_image_layout scaled
background_tint 0.85
dynamic_background_opacity yes
remember_window_size yes
macos_traditional_fullscreen no
macos_show_window_title_in_menubar no
macos_quit_when_last_window_closed yes
confirm_os_window_close 0

# =========================================================
# 标签栏
# =========================================================
tab_bar_edge top
tab_bar_style fade
active_tab_font_style bold
inactive_tab_font_style normal
tab_title_template "{title}"
tab_bar_min_tabs 1
tab_bar_margin_width 0.0
tab_bar_margin_height 0.0 0.0
tab_bar_background none

# =========================================================
# 光标
# =========================================================
cursor_trail 3
cursor_trail_start_threshold 2
cursor_trail_decay 0.1 0.4

# =========================================================
# 交互
# =========================================================
copy_on_select clipboard
notify_on_cmd_finish unfocused
scrollback_indicator_opacity 1.0

# =========================================================
# Shell
# =========================================================
term xterm-256color
shell /opt/homebrew/bin/fish
shell_integration no-title
allow_remote_control yes

# =========================================================
# 性能
# =========================================================
repaint_delay 5
input_delay 0

# =========================================================
# 快捷键
# =========================================================
kitty_mod cmd

# 标签管理
map kitty_mod+t launch --type=tab --cwd=current
map kitty_mod+r launch --type=overlay sh -c 'printf "Tab title: "; read title; [ -n "$title" ] && kitty @ set-tab-title "$title"'
map kitty_mod+1 goto_tab 1
map kitty_mod+2 goto_tab 2
map kitty_mod+3 goto_tab 3
map kitty_mod+4 goto_tab 4
map kitty_mod+5 goto_tab 5
map kitty_mod+6 goto_tab 6
map kitty_mod+7 goto_tab 7
map kitty_mod+8 goto_tab 8
map kitty_mod+9 goto_tab 9

# 窗口操作
map fn+f toggle_fullscreen
map kitty_mod+plus set_background_opacity +0.05
map kitty_mod+minus set_background_opacity -0.05
map kitty_mod+w close_window

# tmux 快捷键 (Prefix = Ctrl+Space)
map kitty_mod+[ send_text all \x00|
map kitty_mod+] send_text all \x00-
map kitty_mod+d send_text all \x00d
map kitty_mod+x send_text all \x00x
map kitty_mod+n send_text all \x00c
map kitty_mod+, send_text all \x00,
map kitty_mod+left send_text all \x1b[1;3D
map kitty_mod+right send_text all \x1b[1;3C
map kitty_mod+up send_text all \x1b[1;3A
map kitty_mod+down send_text all \x1b[1;3B

# 搜索
map kitty_mod+f launch --type=overlay --stdin-source=@screen_scrollback fzf --no-sort --no-mouse --exact -i

# Kittens
map kitty_mod+e kitten hints
map kitty_mod+u kitten unicode_input
map kitty_mod+o kitten choose-files

# 鼠标
mouse_map kitty_mod+left press ungrabbed,grabbed mouse_click_url
